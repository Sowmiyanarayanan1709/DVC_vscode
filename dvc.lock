schema: '2.0'
stages:
  data_split:
    cmd: python stages/data_split.py --config=params.yaml
    deps:
    - path: data/Churn_Modelling.csv
      hash: md5
      md5: 496aee8fbfdfa1dfb6daa9dbca5d1a01
      size: 684858
    - path: stages/data_split.py
      hash: md5
      md5: a2d8978168e2eda4b9680fdd58b6dfab
      size: 1655
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        data_split:
          test_size: 0.25
    outs:
    - path: data/X_test.pkl
      hash: md5
      md5: cdcfdded7b0aba25b54243bdc9daf92f
      size: 185987
    - path: data/X_train.pkl
      hash: md5
      md5: 84991cc650d4f320bad44f1242ee6373
      size: 556006
    - path: data/y_test.pkl
      hash: md5
      md5: 20b868ac8a1bc2bb34e898c6791d9e4e
      size: 60586
    - path: data/y_train.pkl
      hash: md5
      md5: 6282068b0007b7b663f55beb12225b19
      size: 180595
  train:
    cmd: python stages/train.py --config=params.yaml
    deps:
    - path: data/X_train.pkl
      hash: md5
      md5: 84991cc650d4f320bad44f1242ee6373
      size: 556006
    - path: data/y_train.pkl
      hash: md5
      md5: 6282068b0007b7b663f55beb12225b19
      size: 180595
    - path: stages/train.py
      hash: md5
      md5: 90869121f6f44f607d8cefccaa86e6b5
      size: 2673
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        train:
          model_type: randomforest
          params:
            n_estimators: 1
            max_depth: 2000
    outs:
    - path: model//clf-model
      hash: md5
      md5: 829ef6ce3df66005ab8afa8354093cee
      size: 148049
    - path: model//clf-model.mlem
      hash: md5
      md5: feb99dba4f70b3be006500f41ba61ee8
      size: 2091
  eval:
    cmd: python stages/eval.py --config=params.yaml
    deps:
    - path: data/X_test.pkl
      hash: md5
      md5: cdcfdded7b0aba25b54243bdc9daf92f
      size: 185987
    - path: data/y_test.pkl
      hash: md5
      md5: 20b868ac8a1bc2bb34e898c6791d9e4e
      size: 60586
    - path: model//clf-model
      hash: md5
      md5: 829ef6ce3df66005ab8afa8354093cee
      size: 148049
    - path: model//clf-model.mlem
      hash: md5
      md5: feb99dba4f70b3be006500f41ba61ee8
      size: 2091
    - path: stages/eval.py
      hash: md5
      md5: 831b36fe335f44eae3e614699505c993
      size: 2835
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols:
          - Geography
          num_cols:
          - CreditScore
          - Age
          - Tenure
          - Balance
          - NumOfProducts
          - HasCrCard
          - IsActiveMember
          - EstimatedSalary
          targ_col: Exited
          random_state: 42
          model_dir: model/
        data_split:
          test_size: 0.25
        train:
          model_type: randomforest
          params:
            n_estimators: 1
            max_depth: 2000
    outs:
    - path: eval_plots/cm.png
      hash: md5
      md5: 905308e5005705921a6f1200dc91a202
      size: 11756
    - path: eval_plots/plots/sklearn/roc.json
      hash: md5
      md5: 89b482b018b01f9a059468411744f592
      size: 366
    - path: feat_imp.csv
      hash: md5
      md5: fb0407df5327f9ae529b686e952efb1c
      size: 314
    - path: metrics.json
      hash: md5
      md5: cf0b45a343ea31fc9c473f397629778c
      size: 69
    - path: model/perm_imp.joblib
      hash: md5
      md5: bdc83157a8fa9dea7e21d25c45dbf9a1
      size: 149547
